---
title: 【java基础】java转发和重定向的区别 
date: 2015-10-14 16:42:20
tags: java转发和重定向的区别
reward: true
---


###java转发和重定向的区别

转发与重定向在编程时候我们偶尔会使用，什么情况下使用什么我们还需细细了解他们的区别！西面我来介绍一下！


<!--more-->

###重定向
 
    前台发起请求后在后台处理后返回一个302并在response里面带回一个location用于重新标识定向的地址

![](https://i.imgur.com/WM47zab.png)
 
在以location为目标地址在次发起请求

![](https://i.imgur.com/iPnMk9V.png)

### 转发请求的过程

     以指定方式（表单看method，直接URL发起就是GET）发一次请求到后台，后台直接跳转到将要重定向的地址，如果成功则返回状态码200给客户端：

![](https://i.imgur.com/CEsfNoz.png)

##区别

重定向和请求转发的区别

1、从上面的一次重定向和一次转发的过程来看，我们可以得出第一个差别点，就是重定向是两次请求，转发是一次请求，因此转发的速度要快于重定向

2、第二个差别点也很明显，重定向之后地址栏上的地址会发生变化，变化成第二次请求的地址，转发之后地址栏上的地址不会变化，还是第一次请求的地址

###重定向和请求转发URL参数的解读

我们知道在Java Web中，一个Servlet分别是这么写重定向和转发的代码的：

1、response.sendRedirect("XXX");

2、request.getRequestDispatcher("XXX").forward(request, response);

这个括号里面的参数也是有一定的规则的，我自己的总结如下：

1、重定向的时候，如果参数为"http://xxxxxxxxxx"，那么重定向到的是指定的重定向地址，无论该重定向地址是内部的还是外部的

2、如果参数不是"http://xxxxxxxxxx"的样子，而是一般的写法，那么都是Tomcat内部跳转（注意是Tomcat内部跳转而不是项目内部跳转），重定向和请求转发的时候有些区别：

（1）重定向，如果XXX以"/"开头，则表示目标地址为http://ip:port/XXX；如果不以"/"开头，则表示目标地值为http://ip:port/项目名/XXX

（2）请求转发，无论XXX是否以"/"开头，都跳转到http://ip:port/项目名/XXX

### 本质区别


一句话，转发是服务器行为，重定向是客户端行为。为什么这样说呢，这就要看两个动作的工作流程：
转发过程：客户浏览器发送http请求----》web服务器接受此请求--》调用内部的一个方法在容器内部完成请求处理和转发动作----》将目标资源发送给客户；在这里，转发的路径必须是同一个web容器下的url，其不能转向到其他的web路径上去，中间传递的是自己的容器内的request。在客户浏览器路径栏显示的仍然是其第一次访问的路径，也就是说客户是感觉不到服务器做了转发的。转发行为是浏览器只做了一次访问请求。


重定向过程：客户浏览器发送http请求----》web服务器接受后发送302状态码响应及对应新的location给客户浏览器--》客户浏览器发现是302响应，则自动再发送一个新的http请求，请求url是新的location地址----》服务器根据此请求寻找资源并发送给客户。在这里location可以重定向到任意URL，既然是浏览器重新发出了请求，则就没有什么request传递的概念了。在客户浏览器路径栏显示的是其重定向的路径，客户可以观察到地址的变化的。重定向行为是浏览器做了至少两次的访问请求的。

### 选择建议

页面之间跳转 jsp等 重定向！

内部servlet跳转选择转发！

代码逻辑是ServletA->ServletB->*.jsp，使用转发，那么这三次操作都在一次请求中，而如果使用重定向，那么客户端将发起三次请求，这真的毫无必要。因此，如果代码逻辑中含有内部的Servlet跳转，使用转发会使一个好的选择。

###最后总结

重定向：你先去了A局，A局的人说：“这个事情不归我们管，去B局”，然后，你就从A退了出来，自己乘车去了B局。 

转发：你先去了A局，A局看了以后，知道这个事情其实应该B局来管，但是他没有把你退回来，而是让你坐一会儿，自己到后面办公室联系了B的人，让他们办好后，送了过来。