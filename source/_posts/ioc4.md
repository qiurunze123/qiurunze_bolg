---
title: java . ioc容器介绍
date: 2017-7-28 16:00
tags:  java . spring
reward: true
---


## **ioc容器介绍**


# 前言

1. IOC是spring容器内核. AOP. 声明式事务等功能在此基础上开花结果，下面我将会通过一个例子来讲述这个比较难懂的概念.
 
### 通过实例理解IOC容器
张之亮导演的墨攻 . 有一个场景：当刘德华所饰演的墨者geli到达梁国都城下.城门口的守军问道 来者何人？ 刘德华回答墨者geli 我们现在通过一个java类为证“城门叩问”的场景来进行编剧.引入IOC概念：

![](http://i1.ciimg.com/601558/6a068d6ae21c4c0b.jpg)

我们发现代码作为角色扮演者的刘德华直接侵入了剧本使得剧本和演员直接耦合在了一起.

一个明智的编剧再编写剧情的时候应该围绕故事的角色来进行.而不应该考虑饰演者.这样才可能在剧本开始拍摄的时候自由的选择演员.而非绑定在刘德华身上.通过以上的分析.我们，恩应该为主人公Geli定义一个接口：


![](http://i1.ciimg.com/601558/c36703b4ce16aadc.jpg)

在①处引入了剧本角色隔离.剧本的清洁通过角色展开.在拍摄时再由具体的人员来饰演.因此他们三人的关系图如下所示：

![](http://i1.ciimg.com/601558/3517997bf10ea531.jpg)


可是.从图中我们可以看见MoAttrack同时依赖于GeLi接口和LiuDeHua类.并没有达成我们所期望的剧本依赖角色的目的. 当时角色最终必须通过具体的演员才能完成拍摄.如何让LiuDeHua和剧本无关而又能完成GeLi的操作具体动作呢？ 当然是在影片拍摄时.导演将LiuDeHua安排到GeLi的角色上. 导演将剧本，角色，饰演者装配起，来如下图：



![](http://i1.ciimg.com/601558/27008ed0873d8a3e.jpg)

通过引入导演，是剧本和具体的饰演者解耦了，对应到具体的软件中，导演像一个装配器，安排演员表表演具体的角色。现在我们可以反过来讲解Ioc的概念了Ioc的字面意思就是控制反转，他包括两个内容：
1.控制
2.反转

到底是什么东西的控制被反转了呢？  对应前面的例子， 控制是指选择Geli角色扮演者的控制权；反转是指这种控制权从墨攻的剧本中移除，转交到导演的手中，对于软件来讲，即某一接口具体实现类的选择控制权从调用类中移除，转交给第三方的决定.
因为IOC确实不够开门见山，因此业界曾进行广泛的讨论，最终有人提出了DI的概念用以代替Ioc,既让调用类对某一接口实现类的依赖关系有第三方注入，已移除调用类的对某一接口实现类的依赖。



ps:  <font color="#00BFFF">小编认为 控制反转就相当于    容器是第三方齿轮， 以前A和B是好兄弟,A就找B依赖  ，他们牵手，但是有一天A和B 他们引入了C  ， 以后A要是想的话 .给打个电话C就可以把B 送去让A进行依赖. 控制权由A变成了C  ，  这个就是控制反转</font>




